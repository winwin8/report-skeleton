## Лабораторная работа 2-- Разработка драйверов блочных устройств p3404c Ван Юе

 

Цель работы: получить знания и навыки разработки драйверов блочных устройств для операционной системы Linux.

 

**задача：** 

1.1. Драйвер должен создавать виртуальный жесткий диск в оперативной памяти с размером 50 Мбайт. 

1.2. Созданный диск должен быть разбит на разделы в соответствии с вариантом задания. 

1.3. Провести форматирование разделов диска с помощью утилиты mkfs.vfat. 

1.4. Измерить скорость передачи данных при копировании файлов между разделами созданного виртуального диска. 

1.5. Измерить скорость передачи данных при копировании файлов между разделами виртуального и реального жестких дисков. вариант1： Один первичный раздел размером 10Мбайт и один расширенный раздел, содержащий два логических раздела размером 20Мбайт каждый.



Описание функциональности драйвера Драйвер блочного устройства создает виртуальный жесткий диск в оперативной памяти с размером 50 Мбайт. Созданный виртуальный диск содержит один первичный раздел размером 10Мбайт и один расширенный раздел, содержащий два логических раздела размером 20Мбайт каждый.

***

#### Инструкция по сборке Собирается с помощью команды make.

 Инструкция пользователя Для запуска драйвера необходимо ввести команду insmod ram_block.ko , которая загружает модуль ядра в систему. Для выгрузки модуля драйвера нужно ввести команду sudo rmmod ram_block.

 

#### Примеры использования：

#### Вывод разделов виртуального диска

 sudo fdisk -l

 

#### Форматирование разделов диска с помощью утилиты mkfs.vfat 

sudo mkfs.vfat /dev/rb1

sudo mkfs.vfat /dev/rb3 

 

#### Скорость передачи копируемых файлов между реальным диском и виртуальным диском.

 sudo time dd if=/dev/sda1 of=/dev/rb5 bs=4k count=1000

1000+0 records in

1000+0 records out

4096000 bytes (4.1 MB, 3.9 MiB) copied, 0.0168574 s, 243 MB/s

 

#### данных при копировании файлов между разделами виртуального и реального жестких дисков

 sudo time dd if=/dev/rb1 of=/dev/rb5 bs=4k count=1000

1000+0 records in

1000+0 records out

4096000 bytes (4.1 MB, 3.9 MiB) copied, 0.0145401 s, 282 MB/s